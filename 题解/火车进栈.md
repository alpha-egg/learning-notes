**题目：** 火车进栈

DFS

[129. 火车进栈 - AcWing题库](https://www.acwing.com/problem/content/131/)

**题解：**

本题较为简单，但是因为本人当时不太熟悉递归的方法，特此记录一下。

递归的关键在于恢复状态

代码如下：

```c++
#include<bits/stdc++.h>
#define REP(i,a,b) for(int i=(a); i<=(b); i++)
#define PER(i,a,b) for(int i=(a); i>=(b); i--)
#define PII std::pair<int,int>
using namespace std;
const int M=1e5+50;
typedef long long ll;

inline ll rd(){
    ll x=0,f=1; char c=getchar(); while(!isdigit(c)){if(c=='-') f=-1; c=getchar();}
    while(isdigit(c)){x=10*x+c-'0'; c=getchar();} return x*f;
}

int cnt,n;
stack<int> s;
vector<int> a;
void dfs(int x){
    if(cnt==20) return;
    if((int) a.size()==n){
        for(auto i:a) cout<<i;
        cout<<endl;
        cnt++;
        return;
    }
    if(!s.empty()){
        int tmp=s.top();
        a.push_back(tmp);
        s.pop();
        dfs(x);
        s.push(tmp);
        a.pop_back();
    }
    if(x<=n){
        s.push(x);
        dfs(x+1);
        s.pop();
    }
}

int main(){
    cin>>n;
    dfs(1);
    return 0;
}

```