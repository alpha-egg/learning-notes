## 方法一：归并排序求逆序数




```c++
#include<bits/stdc++.h>
#define REP(i,a,b) for(int i=(a); i<=(b); i++)
#define PER(i,a,b) for(int i=(a); i>=(b); i--)
using namespace std;
const int M=5e5+50;
typedef long long ll;

inline ll rd(){
    ll x=0,f=1; char c=getchar(); while(!isdigit(c)){if(c=='-') f=-1; c=getchar();}
    while(isdigit(c)){x=10*x+c-'0'; c=getchar();} return x*f;
}
  
int a[M],b[M];
  
ll merge_sort(int l, int r){
    if(l>=r) return 0;
    int mid=(l+r)>>1;
    ll ans=merge_sort(l,mid)+merge_sort(mid+1,r);
    int i=l, j=mid+1, k=0;
    while(i<=mid && j<=r){
        if(a[i]<=a[j]) b[k++]=a[i++];
        else{
            b[k++]=a[j++];
            ans+=mid-i+1;
        }
    }
    while(i<=mid) b[k++]=a[i++];
    while(j<=r) b[k++]=a[j++];
    for(int i1=l,i2=0;i1<=r;i1++,i2++) a[i1]=b[i2];
    return ans;
}
  
int main(){
    int n;
    while(n=rd()){
        REP(i,1,n) a[i]=rd();
        cout<<merge_sort(1,n)<<endl;
        REP(i,1,n) cout<<a[i];
    }
    return 0;
}
```